
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Getting started with Kubernetes</title>
    <meta name="description" content="">
    <meta name="author" content="Ken Yang">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="/assets/themes/bootstrap-3/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Ken Yang筆記</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
          <ul class="nav navbar-nav">
            
            
            


  
    
      
    
  
    
      
      	
      	<li><a href="/about">About Ken Yang</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive">Archive</a></li>
      	
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags">Tags</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



          </ul>
          <form method="get" class="navbar-form navbar-right" role="search" action="https://www.google.com/search">
            <div class="form-group">
              <input name="q" id="search-value" type="text" class="form-control" placeholder="Search">
              <input style="display: none" name="as_sitesearch" id="search-value" type="text" class="form-control" value="blog.kenyang.net">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
          </form>
        </div><!-- /.navbar-collapse -->
      </nav>

      <div class="container">
        <style>
/* Adjusted to give override background and text colour */
.highlight pre, pre, .highlight .hll {
    background-color: #49483E;
    border: 1px solid #ccc;
    padding: 6px 10px;
    border-radius: 3px;
    color: #FFFFFF;
}
/* Highlights taken from https://gist.github.com/asaaki/1007420  for Monokai theme */
.c                 { color: #75715e }               /* Comment                     */
.err               { color: #960050;
                     background-color: #1e0010 }    /* Error                       */
.k                 { color: #66d9ef }               /* Keyword                     */
.l                 { color: #ae81ff }               /* Literal                     */
.n                 { color: #f8f8f2 }               /* Name                        */
.o                 { color: #f92672 }               /* Operator                    */
.p                 { color: #f8f8f2 }               /* Punctuation                 */
.cm                { color: #75715e }               /* Comment.Multiline           */
.cp                { color: #75715e }               /* Comment.Preproc             */
.c1                { color: #75715e }               /* Comment.Single              */
.cs                { color: #75715e }               /* Comment.Special             */
.ge                { font-style: italic }           /* Generic.Emph                */
.gs                { font-weight: bold }            /* Generic.Strong              */
.kc                { color: #66d9ef }               /* Keyword.Constant            */
.kd                { color: #66d9ef }               /* Keyword.Declaration         */
.kn                { color: #f92672 }               /* Keyword.Namespace           */
.kp                { color: #66d9ef }               /* Keyword.Pseudo              */
.kr                { color: #66d9ef }               /* Keyword.Reserved            */
.kt                { color: #66d9ef }               /* Keyword.Type                */
.ld                { color: #e6db74 }               /* Literal.Date                */
.m                 { color: #ae81ff }               /* Literal.Number              */
.s                 { color: #e6db74 }               /* Literal.String              */
.na                { color: #a6e22e }               /* Name.Attribute              */
.nb                { color: #f8f8f2 }               /* Name.Builtin                */
.nc                { color: #a6e22e }               /* Name.Class                  */
.no                { color: #66d9ef }               /* Name.Constant               */
.nd                { color: #a6e22e }               /* Name.Decorator              */
.ni                { color: #f8f8f2 }               /* Name.Entity                 */
.ne                { color: #a6e22e }               /* Name.Exception              */
.nf                { color: #a6e22e }               /* Name.Function               */
.nl                { color: #f8f8f2 }               /* Name.Label                  */
.nn                { color: #f8f8f2 }               /* Name.Namespace              */
.nx                { color: #a6e22e }               /* Name.Other                  */
.py                { color: #f8f8f2 }               /* Name.Property               */
.nt                { color: #f92672 }               /* Name.Tag                    */
.nv                { color: #f8f8f2 }               /* Name.Variable               */
.ow                { color: #f92672 }               /* Operator.Word               */
.w                 { color: #f8f8f2 }               /* Text.Whitespace             */
.mf                { color: #ae81ff }               /* Literal.Number.Float        */
.mh                { color: #ae81ff }               /* Literal.Number.Hex          */
.mi                { color: #ae81ff }               /* Literal.Number.Integer      */
.mo                { color: #ae81ff }               /* Literal.Number.Oct          */
.sb                { color: #e6db74 }               /* Literal.String.Backtick     */
.sc                { color: #e6db74 }               /* Literal.String.Char         */
.sd                { color: #e6db74 }               /* Literal.String.Doc          */
.s2                { color: #e6db74 }               /* Literal.String.Double       */
.se                { color: #ae81ff }               /* Literal.String.Escape       */
.sh                { color: #e6db74 }               /* Literal.String.Heredoc      */
.si                { color: #e6db74 }               /* Literal.String.Interpol     */
.sx                { color: #e6db74 }               /* Literal.String.Other        */
.sr                { color: #e6db74 }               /* Literal.String.Regex        */
.s1                { color: #e6db74 }               /* Literal.String.Single       */
.ss                { color: #e6db74 }               /* Literal.String.Symbol       */
.bp                { color: #f8f8f2 }               /* Name.Builtin.Pseudo         */
.vc                { color: #f8f8f2 }               /* Name.Variable.Class         */
.vg                { color: #f8f8f2 }               /* Name.Variable.Global        */
.vi                { color: #f8f8f2 }               /* Name.Variable.Instance      */
.il                { color: #ae81ff }               /* Literal.Number.Integer.Long */
</style>


<div class="page-header">
  <h1>Getting started with Kubernetes </h1>
</div>

<div class="row post-full">
  <div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ken on github -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3783438370424072"
     data-ad-slot="1516206098"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

  </div>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-70705007-1', 'auto');
  ga('send', 'pageview');

</script>

  <div class="col-xs-12">
    <div class="date">
      <span>07 April 2016</span>
    </div>
    <div class="content" style="line-height: 28px;">
      <p><font size=3></p>

<p>Docker玩了一陣子，總覺得沒有玩一些container management的service好像少了點什麼，</br>
剛好team裡用到<a href="http://kubernetes.io/docs/">Kubernetes</a>，所以這裡就記錄一下怎麼使用<a href="http://kubernetes.io/docs/">Kubernetes</a>。</br>
然後這篇會把Kubernetes架在Google Cloud Platform上面，所以還得去安裝Google Cloud SDK。</p>

<p></br></p>

<hr>

<h3 id="1-downloading-kubernetes">1. Downloading Kubernetes</h3>

<hr>

<p>第一步驟要先安裝Kubernetes，安裝方式有好幾種，</p>

<ol>
<li>tarball解開</li>
<li>Build from source</li>
<li>Homebrew</li>
<li>Remote shell script </li>
<li>用Google Cloud SDK安裝</li>
</ol>

<p>各個的詳細步驟可以去<a href="http://kubernetes.io/docs/getting-started-guides/binary_release/">Kubernetes安裝頁面</a>看，我自己是選擇透過Google Cloud SDK來安裝，所以首先要先安裝Google Cloud SDK。</p>

<p></br>
<strong>安裝Google Cloud SDK</strong></p>

<p>Google Cloud SDK這個tool讓你可以對Google Cloud Platform進行操作。安裝指令如下，Default installation path會在你的home目錄底下，</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>curl https://sdk.cloud.google.com <span class="p">|</span> bash
</code></pre></div>
<p></br>
接著要restart shell和設定gcloud environment，<code>gcloud init</code>這個指令會彈出browser要你login，以及要你輸入default zone，我是選asia-east1-a。</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">exec</span> -l <span class="nv">$SHELL</span>
<span class="nv">$ </span>gcloud init
</code></pre></div>
<p></br>
<strong>安裝kubectl</strong></p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>gcloud components install kubectl
</code></pre></div>
<p></br></p>

<!--more-->

<hr>

<h3 id="2-setup-google-cloud">2. Setup Google Cloud</h3>

<hr>

<p>在這步驟要做幾件事情，</p>

<ol>
<li>註冊<a href="https://console.cloud.google.com/">Google Cloud</a></li>
<li>Create project</li>
<li>打開billing</li>
<li>開啟Container Engine API.</li>
</ol>

<p></br>
<strong>Step 1. 註冊<a href="https://console.cloud.google.com/">Google Cloud</a></strong></p>

<p>點了上面的連結至console以後，就發現其實是以前的Google App Engine+Google APIs的後台，</br>
只不過好久沒用了，發現改版改好多..
然後又發現新註冊的user有免費300美金的quota可以使用，</br>
舊有的用戶還沒有這300美金可以用，所以建議可以乾脆註冊新帳號使用比較好。</p>

<p></br>
<strong>Step 2: Create project</strong></p>

<p>有了帳號以後，就去Create project，Create時的project名稱，</br>
如果project名稱沒有重複的話，應該就會是你的<code>PROJECT_ID</code>。</p>

<p></br>
<strong>Step 3: 打開billing</strong></p>

<p>這一步驟就是<a href="https://console.developers.google.com/billing">點這個連結</a>去打開Billing，進去以後要填寫信用卡資料，目的是將來要收費，</br>不過如果你是新註冊的話，一開始先不用擔心這個問題，因為有300美金可以使用。</p>

<p></br>
<strong>Step 4: 開啟Container Engine API</strong></p>

<p>接著要去Enable Container Engine API，<a href="https://console.cloud.google.com/project/_/kubernetes/list">點這個連結</a>去enable，進去以後就選取剛剛create的project，然後按下Continue。(如下圖)</p>

<p><img src="/assets/2016-04-08-enable-container-api.png" alt="cmd"></p>

<p></br></p>

<hr>

<h3 id="3-create-your-node-js-application">3. Create your Node.js application</h3>

<hr>

<p>接著來寫一個簡單的Node.js application，等等會把這application包成docker image，</br>
先create一個folder，然後建立一個server.js，</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>mkdir hellonode-app
<span class="nv">$ </span><span class="nb">cd </span>hellonode-app
<span class="nv">$ </span>vim server.js
</code></pre></div>
<p></br>
再把下面的內容貼入到server.js當中，下面的內容就是建立一個http server，且listen在8080 port上，</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">handleRequest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">www</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">handleRequest</span><span class="p">);</span>
<span class="nx">www</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
</code></pre></div>
<p></br></p>

<hr>

<h3 id="4-create-and-push-a-docker-container-image">4. Create and Push a Docker container image</h3>

<hr>

<p>接著要把上面的application變成一個docker image以及把image push上去，所以首先要先建立一個<code>Dockerfile</code>，Dockerfile作用在之前的<a href="http://blog.kenyang.net/2015/11/30/how-to-use-nodejs-mongodb-with-docker">文章</a>就有解釋過了，
</br>
簡單說就是用來定義這個image的資訊。</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">FROM node:0.12
EXPOSE 8080
COPY server.js .
CMD node server.js
</code></pre></div>
<p></br>
有了<code>Dockerfile</code>以後，就可以來build image了，記得把下面的<code>ken-kubernetes-lab</code>換成你們自己的project id，</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker build -t gcr.io/ken-kubernetes-lab/hello-node:v1 .
</code></pre></div>
<p></br>
build完以後，可以在自己local測試看看，</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker run -d -p 8080:8080 gcr.io/ken-kubernetes-lab/hello-node:v1
<span class="nv">$ </span>curl http://localhost:8080
</code></pre></div>
<p></br>
接著就可以把image push上去Google Container Registry，</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>gcloud docker push gcr.io/ken-kubernetes-lab/hello-node:v1
</code></pre></div>
<h2 id=""></br></h2>

<h3 id="5-create-a-cluster">5. Create a cluster</h3>

<hr>

<p>接著去console，建立一個cluster，如下圖。</p>

<p><img src="/assets/2016-04-08-create-cluster.png" alt="cmd"></p>

<p></br>
建完以後，就把cluster的info餵給kubectl，記得把<code>cluster-1</code>改成你的cluster名稱。</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>gcloud container clusters get-credentials cluster-1
</code></pre></div>
<h2 id=""></br></h2>

<h3 id="6-create-a-pod">6. Create a pod</h3>

<hr>

<p><code>pod</code>在kubernetes的定義是<code>pods are the smallest deployable units of computing that can be created and managed in Kubernetes.</code>，
</br>
簡單說，如果你要在kubernetes的cluster裡面run起來<code>一組</code>container，就得有一個pod，</br>
<code>一組</code>container的意思是，這個pod裡面由一個以上的container所組成。
</br></br>
用kubectl run來建立一個pod:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl run hello-node --image<span class="o">=</span>gcr.io/ken-kubernetes-lab/hello-node:v1 --port<span class="o">=</span>8080
deployment <span class="s2">&quot;hello-node&quot;</span> created
</code></pre></div>
<p>如上面的output所示，<code>kubectl run</code>建立了一個<code>deployment</code>，<code>deployment</code>主要是用來建立或者scale一個pod的一種方式，以這個例子來說，deployment管理了1個pod replica，想看deployment的資訊，就打：</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl get deployments
NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
hello-node   <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>            <span class="m">1</span>           3d
</code></pre></div>
<h2 id=""></br></h2>

<h3 id="7-allow-external-traffic">7. Allow external traffic</h3>

<hr>

<p>pod預設只能被內部access，如果想要讓外部存取，必須把<code>pod</code> expose成一個<code>service</code>:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl expose deployment hello-node --type<span class="o">=</span><span class="s2">&quot;LoadBalancer&quot;</span>
</code></pre></div>
<p>你會發現上面的指令，我們是expose deployment這個object出來，而不是pod，</br>
如上面所說，deployment可能會管理多個pods，所以可以透過deployment來當作load balancer。
取得service ip的指令，請打:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl get services hello-node
NAME         CLUSTER-IP       EXTERNAL-IP       PORT<span class="o">(</span>S<span class="o">)</span>    AGE
hello-node   10.123.244.242   130.211.247.198   8080/TCP   3d
</code></pre></div>
<p><code>EXTERNAL_IP</code>可能需要一點點時間才會顯示出來，所以如果<code>EXTERNAL_IP</code>一開始是空白的，請等一下再試一次。</p>

<h2 id=""></br></h2>

<h3 id="8-scale-up-your-website">8. Scale up your website</h3>

<hr>

<p>Kubernetes其中最強大的一點就是可以很輕鬆的scale你的application，
</br>
假設你的application突然需要更多的capacity，你可以簡單地叫<code>deployment</code>去建立新的replica:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl scale deployment hello-node --replicas<span class="o">=</span>4
</code></pre></div>
<p>現在你的application就有4個replicas，每一個獨立地在cluster中運作，且load balancer去serve traffice。</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl get deployments
NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
hello-node   <span class="m">4</span>         <span class="m">4</span>         <span class="m">4</span>            <span class="m">4</span>           3d
</code></pre></div><div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl get pods
NAME                          READY     STATUS    RESTARTS   AGE
hello-node-3344141985-j2zun   1/1       Running   <span class="m">0</span>          2m
hello-node-3344141985-j70fh   1/1       Running   <span class="m">0</span>          2m
hello-node-3344141985-lzynx   1/1       Running   <span class="m">0</span>          3d
hello-node-3344141985-x3ycw   1/1       Running   <span class="m">0</span>          2m
</code></pre></div>
<h2 id=""></br></h2>

<h3 id="9-roll-out-an-upgrade-to-your-website">9. Roll out an upgrade to your website</h3>

<hr>

<p>假設你的application有bug fixes，Kubernetes也可以輕易地幫助你deploy新版本上去。</br>
首先，先來改剛剛的<code>server.js</code>，修改response message:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">&quot;Hello Kubernetes World!&quot;</span><span class="p">);</span>
</code></pre></div>
<p>接著可以build及publish新版本至registry:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>docker build -t gcr.io/ken-kubernetes-lab/hello-node:v2 . 
<span class="nv">$ </span>gcloud docker push gcr.io/ken-kubernetes-lab/hello-node:v2
</code></pre></div>
<p>push完成以後，我們就有一個v2版本的image可以使用，接下來只要透過<code>kubectl edit</code>指令就可以進行update，
</br>
這個指令會打開一個text editor，內容是一個deployment的yaml config，</br>
我們只需要把<strong><code>gcr.io/ken-kubernetes-lab/hello-node:v1</code></strong>改成<strong><code>gcr.io/ken-kubernetes-lab/hello-node:v2</code></strong>就好。</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl edit deployment hello-node
</code></pre></div>
<p>編輯完成以後，可以去看看pods有什麼變化:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl get pods
NAME                          READY     STATUS        RESTARTS   AGE
hello-node-3344141985-j2zun   1/1       Terminating   <span class="m">0</span>          19m
hello-node-3344141985-j70fh   1/1       Terminating   <span class="m">0</span>          19m
hello-node-3344141985-lzynx   1/1       Terminating   <span class="m">0</span>          3d
hello-node-3344141985-x3ycw   1/1       Terminating   <span class="m">0</span>          19m
hello-node-3422850722-b0niu   1/1       Running       <span class="m">0</span>          13s
hello-node-3422850722-gu7c3   1/1       Running       <span class="m">0</span>          19s
hello-node-3422850722-oaqw7   1/1       Running       <span class="m">0</span>          19s
hello-node-3422850722-ria1t   1/1       Running       <span class="m">0</span>          13s
</code></pre></div>
<p>從output中會發現，deployment建立新的pod，把舊版的pod關掉了。</p>

<h2 id=""></br></h2>

<h3 id="10-delete">10. Delete</h3>

<hr>

<p>由於只有300美金啊，雖然我開了三天也才花費五塊美金，不過沒在用還是關掉吧！</br>
刪除Deployment時，也會一併刪除pod；刪除service會刪除load balancer。</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>kubectl delete service,deployment hello-node
</code></pre></div>
<p>最後記得cluster也要刪除:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>gcloud container clusters delete cluster-1
</code></pre></div>
<p></br>
</br>
</br>
</br>
</br></p>

<p></font></p>

    </div>

    

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#gce-ref">gce <span>1</span></a></li>
     
    	<li><a href="/tags.html#gke-ref">gke <span>1</span></a></li>
     
    	<li><a href="/tags.html#docker-ref">docker <span>2</span></a></li>
     
    	<li><a href="/tags.html#container-ref">container <span>1</span></a></li>
     
    	<li><a href="/tags.html#kubernetes-ref">kubernetes <span>1</span></a></li>
    
  



    </ul>
    
  <div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- ken on github -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-3783438370424072"
         data-ad-slot="1516206098"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  
    <hr>
    <ul class="pagination">
    
      <li class="prev"><a href="/2016/02/15/heroku-redis-connecting-in-python" title="Heroku Redis: Connecting in Python">&laquo; Previous</a></li>
    
      <li><a href="/archive.html">Archive</a></li>
    
      <li class="next disabled"><a>Next &rarr;</a>
    
    </ul>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_developer = 1;
    var disqus_shortname = 'ken-yang'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>





  </div>
</div>


      </div>

    </div>

    <div id="footer">
      <div class="container">
        <p>&copy; 2016 Ken Yang
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>
        </p>
      </div>
    </div>

    





    <!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/themes/bootstrap-3/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>

