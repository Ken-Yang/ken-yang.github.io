

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title></title>
    
    <meta name="author" content="Ken Yang">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="/assets/themes/bootstrap-3/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Ken Yang筆記</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
          <ul class="nav navbar-nav">
            
            
            


  
    
      
    
  
    
      
      	
      	<li><a href="/about">About Ken Yang</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive">Archive</a></li>
      	
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags">Tags</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  



          </ul>
          <form method="get" class="navbar-form navbar-right" role="search" action="https://www.google.com/search">
            <div class="form-group">
              <input name="q" id="search-value" type="text" class="form-control" placeholder="Search">
              <input style="display: none" name="as_sitesearch" id="search-value" type="text" class="form-control" value="blog.kenyang.net">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
          </form>
        </div><!-- /.navbar-collapse -->
      </nav>

      <div class="container">
        <style>
.myButton {
    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
    box-shadow:inset 0px 1px 0px 0px #ffffff;
    background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #f9f9f9), color-stop(1, #e9e9e9));
    background:-moz-linear-gradient(top, #f9f9f9 5%, #e9e9e9 100%);
    background:-webkit-linear-gradient(top, #f9f9f9 5%, #e9e9e9 100%);
    background:-o-linear-gradient(top, #f9f9f9 5%, #e9e9e9 100%);
    background:-ms-linear-gradient(top, #f9f9f9 5%, #e9e9e9 100%);
    background:linear-gradient(to bottom, #f9f9f9 5%, #e9e9e9 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f9f9f9', endColorstr='#e9e9e9',GradientType=0);
    background-color:#f9f9f9;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #dcdcdc;
    display:inline-block;
    cursor:pointer;
    color:#666666;
    font-family:Arial;
    font-size:15px;
    font-weight:bold;
    padding:6px 24px;
    text-decoration:none;
    text-shadow:0px 1px 0px #ffffff;
}
.myButton:hover {
    background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #e9e9e9), color-stop(1, #f9f9f9));
    background:-moz-linear-gradient(top, #e9e9e9 5%, #f9f9f9 100%);
    background:-webkit-linear-gradient(top, #e9e9e9 5%, #f9f9f9 100%);
    background:-o-linear-gradient(top, #e9e9e9 5%, #f9f9f9 100%);
    background:-ms-linear-gradient(top, #e9e9e9 5%, #f9f9f9 100%);
    background:linear-gradient(to bottom, #e9e9e9 5%, #f9f9f9 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#e9e9e9', endColorstr='#f9f9f9',GradientType=0);
    background-color:#e9e9e9;
}
.myButton:active {
    position:relative;
    top:1px;
}
</style>

<body>
    <div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ken on github -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3783438370424072"
     data-ad-slot="1516206098"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    </div>
    <!-- This loops through the paginated posts -->
    
      <h1><a style="color: #F22430" href="/2012/11/25/android-startservice-vs-bindservice">Android: startService vs bindService</a></h1>
      <div style="width: 100%; border-bottom: 1px solid #E7E7E7;"></div>
      <p class="author">
      <div class="date">
        <span>25 November 2012</span>
      </div>
      </p>
      <div class="content" style="line-height: 28px;">
        這篇要說明<br /><ul><li>startService</li><li>bindService</li></ul>這兩者的差別！<br /><br />其實在我之前的筆記有關<a href="https://developer.android.com/guide/components/services.html">Service</a>的文章，都是使用startService！<br />並沒有使用bindService！<br />一方面是因為startService簡單很多！<br />再來也是最近才發現有bindService！<br />應該是說我原本以為startService的行為與bindService差不多！<br />但實際找答案以後才知道不是這樣的！<br /><br /><br />這裡就不多作說明如何使用startService或者bindService！<br />主要會說明這兩者差異性！<br />如果要看如何使用可以看之前的筆記：<br /><br /><ol><li><a href="http://blog.kenyang.net/2012/03/android-c2dm-android.html">Android C2DM (四)：實作之Android篇</a></li><li><a href="http://blog.kenyang.net/2010/11/android-detect-screen-on-and-screen-off.html">android detect screen on and screen off</a></li><li><a href="http://blog.kenyang.net/2010/08/android-sdcard.html">android 偵測 sdcard</a></li></ol><div><br /></div><br />先去看Google的定義，對於startService，Google定義如下<br /><blockquote><b>Once started, a service can run in the background indefinitely, even if the component that started it is destroyed. Usually, a started service performs a single operation and does not return a result to the caller. For example, it might download or upload a file over the network. When the operation is done, the service should stop itself.</b></blockquote>簡言之用startService啟動，這個service是不會跟隨著啓動他的component消滅！且原則上是不能與UI互動的！（原則上）<br /><br /><br />而對於bindService，定義如下：<br /><blockquote><b>A bound service offers a client-server interface that allows components to interact with the service, send requests, get results, and even do so across processes with interprocess communication (IPC). A bound service runs only as long as another application component is bound to it. Multiple components can bind to the service at once, but when all of them unbind, the service is destroyed.</b></blockquote>用bindService起來的話，則此service可以跟該component進行溝通！甚至可以做到 IPC！<br /><br />小結：<br />bindService和startService最主要的差異在於其本身的lifecycle！<div>以及bindService可以用來做IPC！簡單的說就是可以讓你的service和UI溝通！<br /><br /></div><div>這裡就用一個project來說明吧！<br /><div><br />先建立一個new project！<br />在這project中建立一個Activity，並指定它為launcher！<br />然後在建立一個Service！內如如下：<br /><pre class="brush: java">public class Services extends Service {<br /><br /> @Override<br /> public IBinder onBind(Intent intent) {<br />  // TODO Auto-generated method stub<br />  Log.d("TestService","onBind");<br />  return null;<br /> }<br /> <br /> @Override<br /> public int onStartCommand(Intent intent, int flags, int startId) {<br />  Log.d("TestService","onStartCommand");<br />  return super.onStartCommand(intent, flags, startId);<br /> }<br /> @Override<br /> public ComponentName startService(Intent service) {<br />  Log.d("TestService","startService");<br />  return super.startService(service);<br /> }<br /> <br /> @Override<br /> public void onCreate() {<br />  super.onCreate();<br />  Log.d("TestService","onCreate");<br /> }<br /> <br /> @Override<br /> public void onDestroy() {<br />  super.onDestroy();<br />  Log.d("TestService","onDestroy");<br /> }<br /><br /> @Override<br /> public boolean onUnbind(Intent intent) {<br />  Log.d("TestService","onUnbind");<br />  return super.onUnbind(intent);<br /> }<br /> <br />}<br /></pre><br />可以看到上面的Service中並沒有做任何處理！<br />只有簡單的Log！<br />目的只是要讓我們瞭解startService和bindService的lifecycle差異性！<br /><br />首先先來講startService，<br />我們先在onCreate中start！如下：<br /><pre class="brush: java">@Override<br /> protected void onCreate(Bundle savedInstanceState) {<br />  super.onCreate(savedInstanceState);<br />  <br />  startService(new Intent(this,Services.class));<br /> }<br /></pre><br />然後按下run，在開啟DDMS來觀看log！<br />會發現印出了”onCreate"->"onStartCommand"！<br /><br />這時候按下back鍵來destroy這個activity，你會發現什麼都沒有印出來！<br />也就是說這個service仍在background執行！（你得手動stop）<br /><br />這時候我們換成bindService來看看，如下：<br /><pre class="brush: java">@Override<br /> protected void onCreate(Bundle savedInstanceState) {<br />  super.onCreate(savedInstanceState);<br />  <br />  bindService(new Intent(this,Services.class),null,Context.BIND_AUTO_CREATE);<br /> }<br /></pre><br />一樣按下run！再看一下ＬＯＧ！<br />會發現印出“onCreate"->"onBind"！<br /><br />再按下back鍵，會發現...印出了！<br />“onUnbind"->"onDestroy"<br /><br /><br /><br />總結上面兩項的差異，<br />會發現使用bindService時，<br />這個service的lifecycle是跟隨著bind它的object！<br />所以當該object被destroy，自然而然這個service也被destroy！<br /><br />而使用startService，<br />就不是這樣了！這個service就是獨立的！不屬於任何一個object！<br />得靠stopService來停止！（任何一個Activity中都可以stop）<br /><br /><br />註：bindService的使用方式比較特別！<br />多帶了幾個參數！<br />在這個例子我們第二個參數設為null！<br />其實這參數是要傳入一個ServiceConnection的物件！<br />而ServiceConnection是一個Interface，這個Interface中<br />會有兩個callback function！<br />主要是用來monitor 這個service的state！<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></div></div>
      </div>
      <footer>
        <p><a class="myButton" href="/2012/11/25/android-startservice-vs-bindservice">read more &raquo;</a></p>
        <div>
          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ken on github -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3783438370424072"
     data-ad-slot="1516206098"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
      </footer>
      <hr>
    
      <h1><a style="color: #F22430" href="/2012/11/19/android-r-cannot-be-resolved-to-variable">Android: r cannot be resolved to a variable</a></h1>
      <div style="width: 100%; border-bottom: 1px solid #E7E7E7;"></div>
      <p class="author">
      <div class="date">
        <span>19 November 2012</span>
      </div>
      </p>
      <div class="content" style="line-height: 28px;">
        <span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">早上發生了一個很有趣的事情...</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">因為最近新版的Android</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">&nbsp;SDK非常的雞婆！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">如果一開始預設選的sdk是4.x以上，</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">re</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">s/</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">底下會多了一個value-v11, value-v14住兩個資料夾，</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">這裡面都是放一些layout/</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">theme！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"><br /></span> <span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">這些layout就是根據不同的SDK version去gen出來的！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">其實它的目的就是要你吃它新推出</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">的action bar的概念！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">但是如果你把project default sdk version改成2.x！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">那就慘了！因為2.X SDK不認得那是什麼！！！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">所以你的R.java會一直buil</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">d不出來！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">soloution就是把那兩個資料夾砍了！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">還有一點</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">！在layout裡面以前有一個attribute是fill_</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">parent！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">但在某個版本SDK被deprecated！改成</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">match_parent！！！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"><br /></span> <span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">而4.X就是用match_pa</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">rent！</span><br /><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">如果改回2.X sdk就要把match_parent改成fill_paren</span><wbr style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></wbr><span class="word_break" style="background-color: white; color: #333333; display: inline-block; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;"></span><span style="background-color: white; color: #333333; font-family: 'lucida grande', tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 17px;">t！</span><br /><br /><br /><br />
      </div>
      <footer>
        <p><a class="myButton" href="/2012/11/19/android-r-cannot-be-resolved-to-variable">read more &raquo;</a></p>
        <div>
          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ken on github -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3783438370424072"
     data-ad-slot="1516206098"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
      </footer>
      <hr>
    
      <h1><a style="color: #F22430" href="/2012/11/18/google-analytics-for-android-easytrack">Google Analytics for Android - EasyTrack </a></h1>
      <div style="width: 100%; border-bottom: 1px solid #E7E7E7;"></div>
      <p class="author">
      <div class="date">
        <span>18 November 2012</span>
      </div>
      </p>
      <div class="content" style="line-height: 28px;">
        <a href="https://www.google.com/analytics/web/">Google Analytics</a>是一套分析工具！<br />最初只有ＷＥＢ版才有，可以分析你的流量、人口分布、瀏覽器來源等等之類的資訊！<br />但現在已有了<a href="https://developers.google.com/analytics/devguides/collection/android/v2/">Android</a> &amp; iOS等其他版本，<br />可以利用這套API去分析使用者在你app上的使用情況．<br />（例如：在這個Activiy待了多久，或者做了怎樣的行為，點了哪些button等等之類的，甚至可以有exception report）<br /><br /><br />這篇主要會說明在Android上面如何使用！<br />在這篇會先講解簡單的EasyTrakcer的部分！<br />EasyTrakcer顧名思義就是很簡單的意思！<br />有好有壞！好的是你可以快速implement，<br />壞的是彈性較小！<br /><br /><br /><br />在開始實作之前，你得先去Google Analytics上開一個project for android，<br />目的是為了申請一個ID ！<br />網址：<a href="https://www.google.com/analytics/web/">https://www.google.com/analytics/web/</a><br /><br />進來此網站之後，會見到下圖，<br />(1) &nbsp;請點選下圖中的New Account<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-Dxkod0pGeq4/UJxdp3jg3II/AAAAAAAAEfU/Qj7JmF9xBao/s1600/0.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="234" src="http://3.bp.blogspot.com/-Dxkod0pGeq4/UJxdp3jg3II/AAAAAAAAEfU/Qj7JmF9xBao/s640/0.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">圖一</td></tr></tbody></table><br /><br />(2) &nbsp;接著會看到下圖，請點選“應用程式”（預設是網站）<br /><div>接著就輸入自己的應用程式名<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-U0rDuWSvaw8/UJxdrj63k2I/AAAAAAAAEfk/RMHvNLVQvgM/s1600/1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="286" src="http://3.bp.blogspot.com/-U0rDuWSvaw8/UJxdrj63k2I/AAAAAAAAEfk/RMHvNLVQvgM/s640/1.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">圖二</td></tr></tbody></table><br />(3) &nbsp;完成上述步驟以後，你就會得到自己的Google Analytics ID，</div><div>這ID要記起來！因為待會再Android</div><div><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-lEh6Ua6CVAI/UJxds0IAtZI/AAAAAAAAEfo/MJQjdZKRnek/s1600/2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="556" src="http://4.bp.blogspot.com/-lEh6Ua6CVAI/UJxds0IAtZI/AAAAAAAAEfo/MJQjdZKRnek/s640/2.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">圖三</td></tr></tbody></table><br /><br /><br /><br />完成上述的申請以後！<br />(1) 接著要先去下載Google Analytics SDK (<a href="https://developers.google.com/analytics/devguides/collection/android/resources">Here</a>)<br /><br />(2) 解壓縮出來<br /><br />(3) 開一個Android Project<br /><br />(4) 把lib include至Android Project中<br />&nbsp; &nbsp; &nbsp;在Project中點選右鍵選擇properties<br />&nbsp; &nbsp; &nbsp;接著會見到下圖，點選下圖中右方的紅色框框Java Build Path<br />&nbsp; &nbsp; &nbsp;然後點選下圖中上方的紅色框框Libraries<br />&nbsp; &nbsp; &nbsp;再點選下圖中有方紅色框框的Add External JARS...<br />&nbsp; &nbsp; &nbsp;然後找到你剛剛下載的lib，把它加進來就好！<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-aGK_Oeia2Hg/UJxgQJ9HNPI/AAAAAAAAEgE/WPQna3wVp_Y/s1600/Screen+Shot+2012-11-09+at+9.31.08+AM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="358" src="http://1.bp.blogspot.com/-aGK_Oeia2Hg/UJxgQJ9HNPI/AAAAAAAAEgE/WPQna3wVp_Y/s640/Screen+Shot+2012-11-09+at+9.31.08+AM.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">圖四</td></tr></tbody></table><br />(5) 把剛剛include進來的jar export出來！（如下圖）</div><div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-AXA_hPFjM3g/UJxgRE5lXfI/AAAAAAAAEgI/zAIK41K29fc/s1600/Screen+Shot+2012-11-09+at+9.31.35+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="352" src="http://2.bp.blogspot.com/-AXA_hPFjM3g/UJxgRE5lXfI/AAAAAAAAEgI/zAIK41K29fc/s640/Screen+Shot+2012-11-09+at+9.31.35+AM.png" width="640" /></a></div><br /><br /><br /><br /><br /><br /><div class="p1">(7) 加入下列兩項permission<br /><pre class="brush: xml">&lt;uses-permission android:name="android.permission.INTERNET" /&gt;<br />&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;<br /><br /></pre></div></div><br /><br />(8) 接著在project中/res/value底下建立一個analytics.xml<br />內容如下：<br /><pre class="brush: xml">&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br /><br />&lt;resources&gt;<br />  &lt;!--Replace ID with your tracking ID--&gt;<br />  &lt;string name="ga_trackingId"&gt;UA-XXXX-Y&lt;/string&gt;<br /><br />  &lt;!-- use for debug --&gt;<br />  &lt;bool name="ga_debug"&gt;true&lt;/bool&gt;<br /> <br />  &lt;!--Enable Activity tracking--&gt;<br />  &lt;bool name="ga_autoActivityTracking"&gt;false&lt;/bool&gt;<br /><br />&lt;/resources&gt;<br /><br /></pre><br />註：<br />ga_trackingId記得填寫自己剛剛申請的那個id<br />ga_debug的意思是使用debug模式，可以讓你在local端看到一些track的資訊！<br />如果你沒有設置這個attributes，你可能要等很久很久，你的Google Analytics後台管理頁面才會更新資訊.....<br />所以還是設定一下吧！<br />ga_autoActivityTracking這個property也很重要，如果設為true的話，在initial tracker時，tracker會自動發出一個request，這個requset就包含了device name, screen resolution, os等等之類的資訊！在這我們先設為false，一切以手動的方式進行track！<br /><br />(9) 開始寫code，<br /><pre class="brush: java">private Tracker tracker  = null; // use for track event, exception..etc.<br /> private Context cxt   = null;<br /> private int iDispatchTime  = 3; // determine how long send the information to Google<br /> private double dSampleRate  = 100;  // determine how much information to be send <br /> <br /> @Override<br /> protected void onCreate(Bundle savedInstanceState) {<br />  super.onCreate(savedInstanceState);<br />  setContentView(R.layout.main);<br />  cxt = this;<br />  <br />  EasyTracker.getInstance().setContext(cxt); // initial<br />  <br />  // start a Tracker, you must to do this thing otherwise you can't send any tracker to Google.<br />  EasyTracker.getInstance().activityStart((Activity)cxt); // Add this method.<br />  <br />  // 取得一個tracker<br />  tracker = EasyTracker.getTracker();<br />  <br />  // 設定Sample Rate, sample rate用意在於如果你的app很多人使用，<br />  // 那麼你可以自己設定有百分之幾的device資訊會被送出Google<br />  // 這裡設定100%，也就是說所有device都會送出資訊<br />  tracker.setSampleRate(dSampleRate);<br />  <br />  // 設定dispatch time<br />  // 這裡預設為3秒,也就是說每次trackEvent, trackException一次<br />  // 都會在3秒以後送出（當然你可以手動進行dipatch)<br />  GAServiceManager.getInstance().setDispatchPeriod(iDispatchTime);<br />  <br />  <br />  // track event<br />  tracker.trackEvent("UI_ACTION", "buttonClick", "labelCreatedByKen", 0l);<br />  <br />  // track view, 追蹤這個activity使用者停留了多久之類的<br />  tracker.trackView("trackViewHomePage");<br />  <br />  // track exception, 這裡是手動的track exception<br />  // 你可以把trackException放在try{}cathc(){};之中<br />  tracker.trackException("ExceptionCreatedByKen", false);<br />  <br /> }<br /></pre><br /><br />完成以後你可以利用DDMS進行debug，<br />你可以用來看這些track(trackEvent, trackView,trackExeption)送出了那些資訊<br />大概會看到下面那張圖！<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-BywlH9TcOc0/UKjIMzVBY6I/AAAAAAAAEgo/q6FIZcZuLSU/s1600/Screen+Shot+2012-11-18+at+7.31.19+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="242" src="http://4.bp.blogspot.com/-BywlH9TcOc0/UKjIMzVBY6I/AAAAAAAAEgo/q6FIZcZuLSU/s640/Screen+Shot+2012-11-18+at+7.31.19+PM.png" width="640" /></a></div><br /><br /><br /><br />而在Google Analytics的後台就會看到上面送出的那些資訊！<br />如下圖！<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-6cfIImlH8IY/UKjI8wzRvFI/AAAAAAAAEgw/S8amYNJZcXY/s1600/Screen+Shot+2012-11-18+at+7.37.11+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="50" src="http://3.bp.blogspot.com/-6cfIImlH8IY/UKjI8wzRvFI/AAAAAAAAEgw/S8amYNJZcXY/s640/Screen+Shot+2012-11-18+at+7.37.11+PM.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">trackEvent</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-5ENuqzoe-iE/UKjI9Qfgn7I/AAAAAAAAEg4/DkvcbgIbzDs/s1600/Screen+Shot+2012-11-18+at+7.37.26+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="112" src="http://2.bp.blogspot.com/-5ENuqzoe-iE/UKjI9Qfgn7I/AAAAAAAAEg4/DkvcbgIbzDs/s640/Screen+Shot+2012-11-18+at+7.37.26+PM.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">trackView</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-yhHyh90Fc6g/UKjI98iTrZI/AAAAAAAAEhA/-vlpKVWqca8/s1600/Screen+Shot+2012-11-18+at+7.37.49+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="72" src="http://3.bp.blogspot.com/-yhHyh90Fc6g/UKjI98iTrZI/AAAAAAAAEhA/-vlpKVWqca8/s640/Screen+Shot+2012-11-18+at+7.37.49+PM.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">trackExcpetion-1</td></tr></tbody></table><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-wnVzemAc0CU/UKjI-kckbiI/AAAAAAAAEhI/GDtgDoJv6FM/s1600/Screen+Shot+2012-11-18+at+7.37.59+PM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="102" src="http://1.bp.blogspot.com/-wnVzemAc0CU/UKjI-kckbiI/AAAAAAAAEhI/GDtgDoJv6FM/s640/Screen+Shot+2012-11-18+at+7.37.59+PM.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">trackException-2</td></tr></tbody></table><br />trackException有兩張圖，因為trackException會記錄著是那個version的app發生exception的！<br />所以如果你有很多個version，你會在第一張圖看到很多個version，<br />因為這個是test app，所以目前只有一個1.0，點進去以後就會看到詳細的exception資訊了！（如第二張圖）<br /><br /><br /><br /><br />上面code之中有講到trackException，大家可能會有點confused，<br />因為如果你在開發app時，error handling做不好的時候，可能會導致app crash！<br />那麼屬於這邊的exception 該怎麼抓到呢？<br />恩！在Google Analytics也有提供這樣的功能！<br />只要在上面的xml檔當中加入下面的element即可！<br /><br /><pre class="brush: xml">&lt;!--Enable automatic exception tracking--&gt;<br />  &lt;bool name=&quot;ga_reportUncaughtExceptions&quot;&gt;true&lt;/bool&gt;  <br /></pre><br /><br />上面就是一些稍微進階的Google Analytic的使用方式！<br /><br /><br /><br />
      </div>
      <footer>
        <p><a class="myButton" href="/2012/11/18/google-analytics-for-android-easytrack">read more &raquo;</a></p>
        <div>
          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ken on github -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3783438370424072"
     data-ad-slot="1516206098"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
      </footer>
      <hr>
    

    <!-- Pagination links -->
    <div class="pagination">
      
        <a href="/blog/page21" class="previous">Previous</a>
      
      <span class="page_number ">Page: 22 of 61</span>
      
        <a href="/blog/page23" class="next">Next</a>
      
    </div>

    <div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ken on github -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3783438370424072"
     data-ad-slot="1516206098"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-70705007-1', 'auto');
  ga('send', 'pageview');

</script>

    </div>
</body>

      </div>

    </div>

    <div id="footer">
      <div class="container">
        <p>&copy; 2018 Ken Yang
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>
        </p>
      </div>
    </div>

    





    <!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/themes/bootstrap-3/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>

