---
layout: post
title: ApacheBench 進行stress testing
date: '2010-11-08T16:14:00.000+08:00'
author: Ken Yang
tags:
- apache
- ApacheBench
modified_time: '2010-11-08T16:16:43.978+08:00'
blogger_id: tag:blogger.com,1999:blog-866973865356001297.post-9103318705837556481
blogger_orig_url: http://blog.kenyang.net/2010/11/apachebench-stress-testing.html
---

<br />Apache提供了一個<b>免費</b>的工具(ApacheBench )來讓我們測試網站的承受壓力程度，<br /><br />不過ApacheBench 僅能提供對單一URL進行測試，但是真正的情況下，<br /><br />可能是同時很多個user連結不同的url，ApacheBench 並不能做到這樣的test<br /><br />但可以利用它來test會耗費較多效能的程式，來看看該網頁程式的承受程度。<br /><br />所以其實ApacheBench 是無法去模擬真實的狀況，沒辦法，It's free！<br /><br /><br /><br />ＯＫ，來開始說明吧。<br /><br />只要您有安裝Apache，那麼也一定會有ApacheBench ，<br /><br />就在<b>／</b><b>apache安裝目錄／bin<span class="Apple-style-span" style="font-weight: normal;"><b>／</b></span>ab.exe</b><br /><b><br /></b><br /><a href="http://httpd.apache.org/docs/2.2/programs/ab.html">我們可以到官網來看使用說明</a><br /><br />也可以直接下個command來看所有的使用參數說明<br /><br /><span class="Apple-style-span" style="background-color: #eeeeee;">&nbsp;&nbsp;ab.exe -h &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br /><br />這裡就不作詳細的參數說明，大家可以到官網觀看。<br /><br /><br /><br />這裡舉個例子<br /><br /><span class="Apple-style-span" style="background-color: #eeeeee;">&nbsp;&nbsp; ab -n 100 &nbsp;http://www.google.com<span class="Apple-style-span" style="color: red;">/</span> &nbsp; &nbsp;</span><br /><br />注意: &nbsp;如果不是指定某page，一定要以<span class="Apple-style-span" style="color: red;">/</span>為結尾，如果是指定到page就不用了。<br /><br />參數-n意思是&nbsp;對該網站發出幾次request<br /><br />下了該command以後<br /><br />會response一長串的資訊<br /><br />我們只要看到幾個重要性的指標就好<br /><br />首先先看到兩個指標Complete requests、Failed requests<br /><br /><b>Complete requests &nbsp;：完成的request次數</b><br /><br /><b>Failed requests　　：失敗的次數</b><br /><br />如果失敗的次數太高，代表著該網站同一時間能承受的request數量不能太高。<br /><br />然後再看到<b>Connection Times：進行stress testing時的處理時間</b><br /><br /><br /><blockquote>Connection Times (ms)</blockquote><blockquote>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;min &nbsp;mean[+/-sd] median &nbsp; max</blockquote><blockquote>Connect: &nbsp; &nbsp; &nbsp; &nbsp;17 &nbsp; &nbsp; &nbsp;33 &nbsp;62.9 &nbsp; &nbsp; &nbsp;22 &nbsp; &nbsp; &nbsp; &nbsp;421</blockquote><blockquote>Processing: &nbsp; 20 &nbsp; &nbsp; &nbsp;40 &nbsp;86.1 &nbsp; &nbsp; &nbsp;25 &nbsp; &nbsp; &nbsp; &nbsp;688</blockquote><blockquote>Waiting: &nbsp; &nbsp; &nbsp; &nbsp; 19 &nbsp; &nbsp; &nbsp;35 &nbsp;71.8 &nbsp; &nbsp; &nbsp;25 &nbsp; &nbsp; &nbsp; &nbsp;688</blockquote><blockquote>Total: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 39 &nbsp; &nbsp; &nbsp;73 104.9 &nbsp; &nbsp; 47 &nbsp; &nbsp; &nbsp; &nbsp;709</blockquote><br /><br />connect：是我們發出request，一直到server收到request的時間<br /><br />processing：是request後，一直到server response這期間的時間<br /><br />waiting：發出request以後，一直到收到response第一個byte的時間<br /><br />total：就是connect+processing<br /><br /><br />我們大概可以從<b>Complete requests</b>、<b>Failed requests</b>、<b>Connection Times</b> 這幾個指標來衡量一隻程式能承受的壓力程度。<br /><div><br /></div><br /><br /><br /><br /><br />