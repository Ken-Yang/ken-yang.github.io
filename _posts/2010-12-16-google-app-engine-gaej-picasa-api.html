---
layout: post
title: Google App Engine (GAE/J) 使用 Picasa API 取得相簿列表
date: '2010-12-16T06:46:00.000+08:00'
author: Ken Yang
tags:
- picasa
- GAE
- gae/j
modified_time: '2010-12-16T06:47:19.290+08:00'
blogger_id: tag:blogger.com,1999:blog-866973865356001297.post-7220957436703278358
blogger_orig_url: http://blog.kenyang.net/2010/12/google-app-engine-gaej-picasa-api.html
---

不管你在哪裡(GAE、Java Application)要使用Picasa<br /><br />都一定要reference 4個jar檔，<br /><br /><br /><ol><li>gdata-core-1.0.jar</li><li>gdata-media-1.0.jar</li><li>gdata-photos-2.0.jar</li><li>google-collect-1.0-rc1.jar</li></ol><br /><br />可是Google Code的說明文件卻少說一個，<br /><br />文件上並沒有叫人家reference第四個，<br /><br />但是要reference進來才不會有錯<br /><br />reference進去以後就開始撰寫程式碼了<br /><br /><br /><br />這邊是以一個<b>固定帳號</b>去做登入<br /><br />跟之前<a href="http://blog.kenyang.net/search/label/google%20calendar">在GAE中使用行事曆</a>的例子<b>不一樣</b><br /><br />那個例子是會有Google登入畫面讓使用者輸入自己的帳號密碼，<br /><br />然後去存取使用者自己本身的行事曆<br /><br />不過這個例子不是，這個例子是用寫死的帳號密碼登入<br /><br />(<span class="Apple-style-span" style="font-size: x-small;">如果妳一樣要讓使用者填選，那麼也是要用<span class="Apple-style-span" style="font-family: Verdana, Arial, sans-serif; line-height: 16px;">AuthSub來認證，可以去行事曆那個例子看，差不</span></span><span class="Apple-style-span" style="font-family: Verdana, Arial, sans-serif; font-size: 13px; line-height: 16px;">多)</span><br /><span class="Apple-style-span" style="font-family: Verdana, Arial, sans-serif; font-size: 13px; line-height: 16px;"><br /></span><br />開始撰寫程式碼了<br /><br /><pre class="brush: java">package edu.chao.lab.servlet;<br /><br />import java.io.IOException;<br />import java.net.URL;<br />import java.util.List;<br /><br />import javax.servlet.ServletException;<br />import javax.servlet.http.HttpServlet;<br />import javax.servlet.http.HttpServletRequest;<br />import javax.servlet.http.HttpServletResponse;<br /><br />import com.google.gdata.client.photos.PicasawebService;<br />import com.google.gdata.data.photos.AlbumFeed;<br />import com.google.gdata.data.photos.GphotoEntry;<br />import com.google.gdata.util.ServiceException;<br /><br />public class test extends HttpServlet {<br /> <br /> @Override<br /> protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br />  super.doGet(req, resp);<br /> try {<br />  String strAcc = "你的帳號";<br />  String strPwd = "你的密碼";<br />  <br />  PicasawebService service = new PicasawebService("sample");<br />  service.setUserCredentials(strAcc, strPwd);    //登入<br />  URL feedUrl = new URL("https://picasaweb.google.com/data/feed/api/user/"+strAcc+"?kind=album");<br />  AlbumFeed myUserFeed = service.getFeed(feedUrl, AlbumFeed.class); //取得所有相簿烈表<br />  List&lt;GphotoEntry&gt; lAlbum = myUserFeed.getEntries();<br />  <br />  for (GphotoEntry myAlbum : lAlbum) {<br />   resp.getWriter().println(myAlbum.getTitle().getPlainText());//印出相簿名稱<br />   resp.getWriter().println(myAlbum.getGphotoId());   //印出相簿編號<br />   <br />   <br />  }<br /> } catch (ServiceException e) {<br />   // TODO Auto-generated catch block<br />   e.printStackTrace();<br /> }<br /> }<br />  <br />}<br /><br /><br /></pre><br /><span class="Apple-style-span" style="font-family: Verdana, Arial, sans-serif; font-size: 13px; line-height: 16px;"><br /></span><br /><span class="Apple-style-span" style="font-family: Verdana, Arial, sans-serif; font-size: 13px; line-height: 16px;"><br /></span><br />這樣就完成了讀取相簿列表<br /><br /><br /><br /><br /><br /><br /><br /><br />