<a href="http://aws.amazon.com/simpledb/">SimpleDB </a>是Amazon提供的一種NoSQL DATABASE!<br />詳細說明去官網看吧!<br /><br /><br />這篇主要會教大家如何<br />建立一張table，<br />新增資料<br />刪除資料<br />查詢資料<br /><br /><br />首先要先宣告一些必備的參數，<br /><pre class="brush: java">// 你的table name(在Relational Database叫做table，這裡叫做domain)<br />  final String DOMAIN_NAME = "member";<br />  <br />  // 取得憑證，這檔案預設在/src底下<br />  AWSCredentials credentials = new PropertiesCredentials(getClass().getClassLoader().getResourceAsStream("AwsCredentials.properties"));<br />  <br />  // 宣告一個SimpleDB<br />  AmazonSimpleDB sdb = new AmazonSimpleDBClient(credentials);<br />     <br /></pre><br />接著就建立一個table，<br /><pre class="brush: java">// 建立一個table(在Relational Database叫做table，這裡叫做domain)<br />  sdb.createDomain(new CreateDomainRequest(DOMAIN_NAME));<br /></pre><br /><br />在SimpleDB的新增分成兩種方式!<br />一種是一筆一筆的新增，<br />另一種是批次的新增!(一次新增多筆)<br />有玩過GAE的大概知道，其實GAE也是這樣!<br />多筆的話就是用一個list存放資料!<br /><br />在這邊先介紹一次新增多筆的!<br /><pre class="brush: java">// 先宣告一個List，List擺放的型態為ReplaceableItem，這型態意思是如果table裡面已經有一筆Ken的資料，那麼就取代掉那筆，不會多一筆<br />  List&lt;ReplaceableItem&gt; listAddData = new ArrayList&lt;ReplaceableItem&gt;();<br /><br /><br />  // 第一筆資料<br />  // 先new一個Item，Item Name是Ken，然後這個item有四個attribute!分別是Sex, Tel, Mail, Nickname<br />  listAddData.add(new ReplaceableItem("Ken").withAttributes(<br />       new ReplaceableAttribute("Sex", "boy", true),<br />       new ReplaceableAttribute("Tel", "09123456", true),<br />       new ReplaceableAttribute("Mail", "xxx@kenyang.net", true),<br />       new ReplaceableAttribute("Nickname", "KenYang", true)));<br /> <br />  // 第二筆<br />  listAddData.add(new ReplaceableItem("Sam").withAttributes(<br />       new ReplaceableAttribute("Sex", "boy", true),<br />       new ReplaceableAttribute("Tel", "09123456", true),<br />       new ReplaceableAttribute("Mail", "xxx@kenyang.net", true),<br />       new ReplaceableAttribute("Nickname", "SamYang", true)));<br /><br /><br />  // 接著就新增吧!記得要指定Domain name!<br />  sdb.batchPutAttributes(new BatchPutAttributesRequest(DOMAIN_NAME, listAddData));<br /><br /></pre><br /><br /><br />接著要介紹新增一筆的! 其實大同小異，只是要宣告一個PutAttributesRequest來擺放資料!<br />一個PutAttributeRequest就代表一筆資料!<br /><pre class="brush: java">PutAttributesRequest dataAttribute = new PutAttributesRequest().withDomainName(DOMAIN_NAME).withItemName("John"); <br />     <br />  dataAttribute.getAttributes().add(        <br />       new ReplaceableAttribute()<br />           .withName("Sex")<br />           .withValue("girl")<br />           .withReplace(true));<br />     <br />  dataAttribute.getAttributes().add(        <br />       new ReplaceableAttribute()<br />           .withName("Tel")<br />           .withValue("0987123")<br />           .withReplace(true));<br />  <br />  dataAttribute.getAttributes().add(        <br />       new ReplaceableAttribute()<br />           .withName("Mail")<br />           .withValue("xxx@gmail.com")<br />           .withReplace(true));<br />     <br />  dataAttribute.getAttributes().add(        <br />       new ReplaceableAttribute()<br />           .withName("Nickname")<br />           .withValue("JohnYang")<br />           .withReplace(true));     <br />     <br />  sdb.putAttributes(dataAttribute);     <br /><br /></pre><br /><br /><br />接下來要介紹刪除! 這邊是介紹一次刪除多筆的!<br />一樣是用一個List去存放要刪除的Item Name!<br />至於刪除單筆，也跟上述方法一樣! 這裡就不多作介紹!<br /><pre class="brush: java">List&lt;DeletableItem&gt; listDeleteData = new ArrayList&lt;DeletableItem&gt;();<br />  listDeleteData.add(new DeletableItem().withName("Ken"));<br />  listDeleteData.add(new DeletableItem().withName("Sam"));<br />  // 所以Ken和Sam這兩筆資料會被刪除<br />  sdb.batchDeleteAttributes(new BatchDeleteAttributesRequest(DOMAIN_NAME,listDeleteData));<br /><br /></pre><br /><br />最後要介紹查詢了!<br /><pre class="brush: java">// 注意，傳統的SQL指令，都是用單引號(')，但是這裡要用(`)<br />     String selectExpression = "select * from `" + DOMAIN_NAME + "` ";<br />     SelectRequest selectRequest = new SelectRequest(selectExpression);<br />     SelectResult sr = sdb.select(selectRequest);<br />  <br />     for (Item item : sr.getItems()) {<br />          response.getWriter().println(item.getName());<br />          response.getWriter().println(item.getAttributes().get(0).getValue());<br />     }<br /><br /></pre><br /><br /><br /><br /><br />